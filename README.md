最新のソースコード（`bookmark_editor.py` および `ai_classifier.py`）に基づいた、**Bookmark Studio** の現時点での **README.md** です。

---

# 🔖 Bookmark Studio — Professional Organizer

**AIの力で、煩雑になったブックマークを「賢く」整理・統合するデスクトップツール**

Bookmark Studioは、Chrome等のブラウザからエクスポートしたブックマークHTMLファイルを読み込み、階層構造の編集、重複削除、そしてGemini AIを活用した自動分類を行うことができるプロフェッショナルな管理ツールです。

## ✨ 主な機能

### 1. AIスマート分類（桃源郷モード相当）

* **AI自動フォルダ分け**: Gemini APIを活用し、ブックマークのタイトルとURLから最適なカテゴリを推測して自動分類します。
* **追加指示（プロンプト）対応**: 「技術系は細かく分けて」「英語のサイトはまとめないで」といった追加の指示をAIに与えて再分類させることが可能です。
* **優先用語設定**: `config.ini` に特定のキーワードを設定することで、優先的に分類したいカテゴリを指定できます。

### 2. 高度な編集・整理機能

* **ドラッグ＆ドロップ**: 直感的な操作でブックマークやフォルダを移動できます。
* **重複・統合ツール**: フォルダ内での重複ブックマーク削除だけでなく、同名のフォルダを1つにまとめる「重複フォルダ統合機能」を搭載しています。
* **リアルタイム検索**: インデックスベースの高速な検索により、大量のブックマークから目的のものを即座に特定します。

### 3. インテリジェント・メンテナンス

* **タイトル自動修正**: URLしか表示されていないブックマークのタイトルを、実際のウェブサイトから取得して自動的に書き換えます。
* **プレビュー表示**: 選択したブックマークの概要（メタデータ）を即座に表示します。
* **プロキシ対応**: 企業環境等での利用を想定し、詳細なプロキシ設定と接続テスト機能を備えています。

## 🛠️ インストールと準備

### 必須環境

* **Python 3.10+**
* **Google AI APIキー**: スマート分類機能を使用するために必要です。

### セットアップ

#### 方法1: 仮想環境を使用（推奨）

仮想環境を使用することで、システムのPython環境を汚染せずに依存関係を管理できます。

**簡単な方法（自動スクリプト）**：
```bash
./run.sh
```
このスクリプトは仮想環境の作成、依存関係のインストール、プログラムの起動を自動で行います。

**手動で仮想環境をセットアップする場合**：
```bash
# 1. 仮想環境を作成（既に存在する場合はスキップ）
python3 -m venv .venv

# 2. 仮想環境を有効化
source .venv/bin/activate
# または
. activate_venv.sh

# 3. 依存関係をインストール
pip install -r requirements.txt

# 4. インストール確認
python3 test_imports.py

# 5. プログラムを実行
python3 main.py

# 仮想環境を無効化する場合
deactivate
```

#### 方法2: システム環境に直接インストール

**自動インストールスクリプト**：
```bash
./install_dependencies.sh
```

**手動インストール**：

1. **システムパッケージのインストール**（Linuxの場合）：
   ```bash
   sudo apt-get update
   sudo apt-get install -y python3-tk python3-pip
   ```

2. **Pythonパッケージのインストール**：
   ```bash
   pip install -r requirements.txt
   ```
   または、ユーザー環境にインストールする場合：
   ```bash
   pip install --user -r requirements.txt
   ```

#### インストール確認

以下のコマンドで依存関係が正しくインストールされたか確認できます：

```bash
python3 test_imports.py
```

### 設定 (`config.ini`)

AI APIキーやプロキシ設定、優先分類用語を `config.ini` に記述することで、本ツールの全ての機能が利用可能になります。

## 📖 基本的な使い方

### プログラムの起動

**仮想環境を使用する場合**（推奨）：
```bash
./run.sh
```
または
```bash
source .venv/bin/activate
python3 main.py
```

**システム環境を使用する場合**：
```bash
python3 main.py
```

### アプリケーションの使い方

1. **読み込み**: **[File] > [Open HTML]** からブックマークファイルを読み込みます。
2. **AI分類**: 整理したいフォルダやブックマークを選択し、**[Tools] > [Smart Classify (AI)]** をクリックします。
3. **プレビュー・適用**: AIが提案する分類先をプレビュー画面で確認し、**[Apply]** を押すと実際にフォルダが作成・移動されます。
4. **保存**: 編集が終わったら **[Save]** を押し、ブラウザにインポート可能な形式で書き出します。

## 📋 対応フォーマット

* **入力/出力**: Netscape Bookmark HTML 形式（Chrome, Edge, Firefox等の標準エクスポート形式）。
* **分類ロジック**: Gemini 1.5 Flash (Google Generative AI)。

---

**[注意]**
本ツールは正式リリース前の開発版です。実行ログはイミディエイトウィンドウに出力されます。重要なブックマークの整理前には、必ず元ファイルのバックアップを取ってください。